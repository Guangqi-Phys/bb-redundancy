
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Redundancy Pattern Visualization</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            margin: 20px;
        }
        .container {
            display: flex;
            gap: 20px;
        }
        .grid-container {
            position: relative;
        }
        .grid {
            width: 480px;
            height: 480px;
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            grid-template-rows: repeat(6, 1fr);
            border: 2px solid #333;
            background-color: #808080;
        }
        .cell {
            border: 1px dashed #404040;
            position: relative;
            cursor: pointer;
        }
        .controls {
            min-width: 300px;
        }
        .redundancy-item {
            margin: 5px 0;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: white;
            cursor: pointer;
            user-select: none;
        }
        .redundancy-item:hover {
            background-color: #f5f5f5;
        }
        .redundancy-item.selected {
            background-color: #e8f4f8;
            border-color: #007acc;
        }
        .info-panel {
            margin-top: 20px;
            padding: 15px;
            background-color: white;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        .clear-btn {
            padding: 10px 20px;
            background-color: #dc3545;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 0;
        }
        .clear-btn:hover {
            background-color: #c82333;
        }
    </style>
</head>
<body>
    <h1>Interactive Redundancy Pattern Visualization (6Ã—6 Grid)</h1>
    
    <div class="container">
        <div class="grid-container">
            <div class="grid" id="grid">
                <!-- Grid cells will be generated by JavaScript -->
            </div>
        </div>
        
        <div class="controls">
            <h3>Redundancy Patterns</h3>
            <button class="clear-btn" onclick="clearSelection()">Clear All</button>
            <div id="redundancy-list">
                <!-- Redundancy items will be generated by JavaScript -->
            </div>
            
            <div class="info-panel">
                <h4>Selected Patterns:</h4>
                <div id="selected-info">None selected</div>
                <h4>XOR Result:</h4>
                <div id="xor-result">No overlapping cells</div>
            </div>
        </div>
    </div>

    <script>
        const ell = 6;
        const m = 6;
        
        // Redundancy data
        const redundancies = [{"id": "HX1", "name": "HX Matrix Row 22", "redundant_row": 22, "dependencies": [0, 1, 3, 4, 6, 7, 9, 10, 18, 19, 21, 24, 25, 27, 28], "redundancy_set": [0, 1, 3, 4, 6, 7, 9, 10, 18, 19, 21, 22, 24, 25, 27, 28], "color": "rgba(229, 117, 117, 0.8)"}, {"id": "HX2", "name": "HX Matrix Row 23", "redundant_row": 23, "dependencies": [0, 2, 3, 5, 6, 8, 9, 11, 18, 20, 21, 24, 26, 27, 29], "redundancy_set": [0, 2, 3, 5, 6, 8, 9, 11, 18, 20, 21, 23, 24, 26, 27, 29], "color": "rgba(229, 117, 117, 0.8)"}, {"id": "HX3", "name": "HX Matrix Row 32", "redundant_row": 32, "dependencies": [2, 3, 4, 5, 6, 7, 8, 9, 13, 14, 15, 16, 19, 21, 25, 29, 30], "redundancy_set": [2, 3, 4, 5, 6, 7, 8, 9, 13, 14, 15, 16, 19, 21, 25, 29, 30, 32], "color": "rgba(229, 117, 117, 0.8)"}, {"id": "HX4", "name": "HX Matrix Row 33", "redundant_row": 33, "dependencies": [1, 5, 6, 8, 14, 15, 16, 17, 18, 19, 20, 21, 25, 26, 27, 28, 31], "redundancy_set": [1, 5, 6, 8, 14, 15, 16, 17, 18, 19, 20, 21, 25, 26, 27, 28, 31, 33], "color": "rgba(229, 117, 117, 0.8)"}, {"id": "HX5", "name": "HX Matrix Row 34", "redundant_row": 34, "dependencies": [1, 5, 7, 8, 9, 10, 12, 13, 14, 17, 18, 19, 20, 21, 24, 26, 30], "redundancy_set": [1, 5, 7, 8, 9, 10, 12, 13, 14, 17, 18, 19, 20, 21, 24, 26, 30, 34], "color": "rgba(229, 117, 117, 0.8)"}, {"id": "HX6", "name": "HX Matrix Row 35", "redundant_row": 35, "dependencies": [1, 2, 3, 4, 6, 7, 8, 11, 12, 13, 14, 15, 18, 20, 24, 28, 31], "redundancy_set": [1, 2, 3, 4, 6, 7, 8, 11, 12, 13, 14, 15, 18, 20, 24, 28, 31, 35], "color": "rgba(229, 117, 117, 0.8)"}, {"id": "HZ1", "name": "HZ Matrix Row 28", "redundant_row": 28, "dependencies": [0, 1, 3, 4, 6, 7, 9, 10, 18, 19, 21, 22, 24, 25, 27], "redundancy_set": [0, 1, 3, 4, 6, 7, 9, 10, 18, 19, 21, 22, 24, 25, 27, 28], "color": "rgba(0, 160, 135, 0.8)"}, {"id": "HZ2", "name": "HZ Matrix Row 29", "redundant_row": 29, "dependencies": [0, 2, 3, 5, 6, 8, 9, 11, 18, 20, 21, 23, 24, 26, 27], "redundancy_set": [0, 2, 3, 5, 6, 8, 9, 11, 18, 20, 21, 23, 24, 26, 27, 29], "color": "rgba(0, 160, 135, 0.8)"}, {"id": "HZ3", "name": "HZ Matrix Row 32", "redundant_row": 32, "dependencies": [2, 3, 4, 5, 8, 10, 12, 13, 16, 17, 18, 22, 24, 25, 26, 27, 30], "redundancy_set": [2, 3, 4, 5, 8, 10, 12, 13, 16, 17, 18, 22, 24, 25, 26, 27, 30, 32], "color": "rgba(0, 160, 135, 0.8)"}, {"id": "HZ4", "name": "HZ Matrix Row 33", "redundant_row": 33, "dependencies": [1, 5, 6, 7, 10, 11, 12, 13, 14, 17, 18, 21, 22, 23, 24, 26, 31], "redundancy_set": [1, 5, 6, 7, 10, 11, 12, 13, 14, 17, 18, 21, 22, 23, 24, 26, 31, 33], "color": "rgba(0, 160, 135, 0.8)"}, {"id": "HZ5", "name": "HZ Matrix Row 34", "redundant_row": 34, "dependencies": [0, 3, 4, 5, 6, 7, 10, 11, 14, 15, 16, 17, 19, 23, 24, 26, 30], "redundancy_set": [0, 3, 4, 5, 6, 7, 10, 11, 14, 15, 16, 17, 19, 23, 24, 26, 30, 34], "color": "rgba(0, 160, 135, 0.8)"}, {"id": "HZ6", "name": "HZ Matrix Row 35", "redundant_row": 35, "dependencies": [0, 1, 4, 5, 6, 7, 8, 11, 12, 15, 16, 17, 18, 20, 25, 27, 31], "redundancy_set": [0, 1, 4, 5, 6, 7, 8, 11, 12, 15, 16, 17, 18, 20, 25, 27, 31, 35], "color": "rgba(0, 160, 135, 0.8)"}];
        
        // Selected redundancy patterns
        let selectedPatterns = new Set();
        
        // Grid state: stores color information for each cell
        let gridState = {};
        
        // Initialize grid
        function initializeGrid() {
            const grid = document.getElementById('grid');
            for (let row = 0; row < m; row++) {
                for (let col = 0; col < ell; col++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    cell.id = `cell-${row}-${col}`;
                    cell.addEventListener('click', () => cellClicked(row, col));
                    grid.appendChild(cell);
                }
            }
        }
        
        // Initialize redundancy list
        function initializeRedundancyList() {
            const list = document.getElementById('redundancy-list');
            redundancies.forEach(redundancy => {
                const item = document.createElement('div');
                item.className = 'redundancy-item';
                item.id = `item-${redundancy.id}`;
                item.innerHTML = `
                    <strong>${redundancy.name}</strong><br>
                    <small>Dependencies: ${redundancy.dependencies.length} rows</small><br>
                    <small>Total elements: ${redundancy.redundancy_set.length}</small>
                `;
                item.addEventListener('click', () => toggleRedundancy(redundancy.id));
                list.appendChild(item);
            });
        }
        
        // Toggle redundancy pattern selection
        function toggleRedundancy(id) {
            const item = document.getElementById(`item-${id}`);
            
            if (selectedPatterns.has(id)) {
                selectedPatterns.delete(id);
                item.classList.remove('selected');
            } else {
                selectedPatterns.add(id);
                item.classList.add('selected');
            }
            
            updateVisualization();
            updateInfo();
        }
        
        // Mix colors using XOR-like logic
        function mixColors(colorInfo) {
            // XOR mod 2 logic: 
            // - Odd number of patterns: show color
            // - Even number of patterns: show no color (background)
            
            if (colorInfo.length % 2 === 1) {
                // Odd number of patterns - show a representative color
                // For simplicity, show the first pattern's color
                // Or mix all colors if you want a blend
                return colorInfo[0].color;
            } else {
                // Even number of patterns (including 0) - XOR cancellation
                // Return transparent to show background
                return 'transparent';
            }
        }

        // Update grid visualization based on selected patterns
        function updateVisualization() {
            // Reset grid state
            gridState = {};
            
            // Apply each selected pattern
            selectedPatterns.forEach(patternId => {
                const redundancy = redundancies.find(r => r.id === patternId);
                if (redundancy) {
                    redundancy.redundancy_set.forEach(element => {
                        const col = Math.floor(element / m);
                        const row = element % m;
                        const cellKey = `${row}-${col}`;
                        
                        if (!gridState[cellKey]) {
                            gridState[cellKey] = [];
                        }
                        
                        // Add this pattern's color to the cell
                        gridState[cellKey].push({
                            pattern: patternId,
                            color: redundancy.color,
                            isRedundant: element === redundancy.redundant_row
                        });
                    });
                }
            });
            
            // Update visual appearance of cells
            for (let row = 0; row < m; row++) {
                for (let col = 0; col < ell; col++) {
                    const cell = document.getElementById(`cell-${row}-${col}`);
                    const cellKey = `${row}-${col}`;
                    
                    if (gridState[cellKey] && gridState[cellKey].length > 0) {
                        // Perform XOR-like color mixing
                        const finalColor = mixColors(gridState[cellKey]);
                        
                        // Only set background if there's a visible color
                        if (finalColor === 'transparent') {
                            cell.style.backgroundColor = ''; // Show default gray background
                        } else {
                            cell.style.backgroundColor = finalColor;
                        }
                        
                        // Add border for redundant rows
                        const hasRedundant = gridState[cellKey].some(c => c.isRedundant);
                        if (hasRedundant) {
                            cell.style.border = '2px solid #000';
                        } else {
                            cell.style.border = '1px dashed #404040';
                        }
                    } else {
                        // Reset to default
                        cell.style.backgroundColor = '';
                        cell.style.border = '1px dashed #404040';
                    }
                }
            }
        }
        
        // Handle cell clicks
        function cellClicked(row, col) {
            const cellKey = `${row}-${col}`;
            const element = row + col * m;
            
            if (gridState[cellKey]) {
                console.log(`Cell (${row}, ${col}) - Element ${element}:`);
                gridState[cellKey].forEach(info => {
                console.log(`  Pattern: ${info.pattern}, Redundant: ${info.isRedundant}`);
            });
        }
    }
    
    // Update info panel
    function updateInfo() {
        const selectedInfo = document.getElementById('selected-info');
        const xorResult = document.getElementById('xor-result');
        
        if (selectedPatterns.size === 0) {
            selectedInfo.innerHTML = 'None selected';
            xorResult.innerHTML = 'No overlapping cells';
            return;
        }
        
        // Show selected patterns
        const selectedNames = Array.from(selectedPatterns).map(id => {
            const redundancy = redundancies.find(r => r.id === id);
            return redundancy ? redundancy.name : id;
        });
        selectedInfo.innerHTML = selectedNames.join('<br>');
        
        // Calculate XOR overlaps
        const overlaps = {};
        Object.keys(gridState).forEach(cellKey => {
            if (gridState[cellKey].length > 1) {
                const patterns = gridState[cellKey].map(c => c.pattern).sort().join('+');
                if (!overlaps[patterns]) {
                    overlaps[patterns] = 0;
                }
                overlaps[patterns]++;
            }
        });
        
        if (Object.keys(overlaps).length === 0) {
            xorResult.innerHTML = 'No overlapping cells';
        } else {
            const overlapText = Object.entries(overlaps)
                .map(([patterns, count]) => `${patterns}: ${count} cells`)
                .join('<br>');
            xorResult.innerHTML = overlapText;
        }
    }
    
    // Clear all selections
    function clearSelection() {
        selectedPatterns.clear();
        document.querySelectorAll('.redundancy-item').forEach(item => {
            item.classList.remove('selected');
        });
        updateVisualization();
        updateInfo();
    }
    
    // Initialize everything when page loads
    document.addEventListener('DOMContentLoaded', () => {
        initializeGrid();
        initializeRedundancyList();
    });
    </script>
</body>
</html>
