
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Redundancy Pattern Visualization</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            margin: 20px;
        }
        .container {
            display: flex;
            gap: 20px;
        }
        .grid-container {
            position: relative;
        }
        .grid {
            width: 480px;
            height: 480px;
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            grid-template-rows: repeat(12, 1fr);
            border: 2px solid #333;
            background-color: #808080;
        }
        .cell {
            border: 1px dashed #404040;
            position: relative;
            cursor: pointer;
        }
        .controls {
            min-width: 300px;
        }
        .redundancy-item {
            margin: 5px 0;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: white;
            cursor: pointer;
            user-select: none;
        }
        .redundancy-item:hover {
            background-color: #f5f5f5;
        }
        .redundancy-item.selected {
            background-color: #e8f4f8;
            border-color: #007acc;
        }
        .info-panel {
            margin-top: 20px;
            padding: 15px;
            background-color: white;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        .clear-btn {
            padding: 10px 20px;
            background-color: #dc3545;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 0;
        }
        .clear-btn:hover {
            background-color: #c82333;
        }
    </style>
</head>
<body>
    <h1>Interactive Redundancy Pattern Visualization (12Ã—12 Grid)</h1>
    
    <div class="container">
        <div class="grid-container">
            <div class="grid" id="grid">
                <!-- Grid cells will be generated by JavaScript -->
            </div>
        </div>
        
        <div class="controls">
            <h3>Redundancy Patterns</h3>
            <button class="clear-btn" onclick="clearSelection()">Clear All</button>
            <div id="redundancy-list">
                <!-- Redundancy items will be generated by JavaScript -->
            </div>
            
            <div class="info-panel">
                <h4>Selected Patterns:</h4>
                <div id="selected-info">None selected</div>
                <h4>XOR Result:</h4>
                <div id="xor-result">No overlapping cells</div>
            </div>
        </div>
    </div>

    <script>
        const ell = 12;
        const m = 12;
        
        // Redundancy data
        const redundancies = [{"id": "HX1", "name": "HX Matrix Row 118", "redundant_row": 118, "dependencies": [0, 1, 3, 4, 6, 7, 9, 10, 12, 13, 15, 16, 18, 19, 21, 22, 36, 37, 39, 40, 42, 43, 45, 46, 48, 49, 51, 52, 54, 55, 57, 58, 72, 73, 75, 76, 78, 79, 81, 82, 84, 85, 87, 88, 90, 91, 93, 94, 108, 109, 111, 112, 114, 115, 117, 120, 121, 123, 124, 126, 127, 129, 130], "redundancy_set": [0, 1, 3, 4, 6, 7, 9, 10, 12, 13, 15, 16, 18, 19, 21, 22, 36, 37, 39, 40, 42, 43, 45, 46, 48, 49, 51, 52, 54, 55, 57, 58, 72, 73, 75, 76, 78, 79, 81, 82, 84, 85, 87, 88, 90, 91, 93, 94, 108, 109, 111, 112, 114, 115, 117, 118, 120, 121, 123, 124, 126, 127, 129, 130], "color": "rgba(229, 117, 117, 0.8)"}, {"id": "HX2", "name": "HX Matrix Row 119", "redundant_row": 119, "dependencies": [0, 2, 3, 5, 6, 8, 9, 11, 12, 14, 15, 17, 18, 20, 21, 23, 36, 38, 39, 41, 42, 44, 45, 47, 48, 50, 51, 53, 54, 56, 57, 59, 72, 74, 75, 77, 78, 80, 81, 83, 84, 86, 87, 89, 90, 92, 93, 95, 108, 110, 111, 113, 114, 116, 117, 120, 122, 123, 125, 126, 128, 129, 131], "redundancy_set": [0, 2, 3, 5, 6, 8, 9, 11, 12, 14, 15, 17, 18, 20, 21, 23, 36, 38, 39, 41, 42, 44, 45, 47, 48, 50, 51, 53, 54, 56, 57, 59, 72, 74, 75, 77, 78, 80, 81, 83, 84, 86, 87, 89, 90, 92, 93, 95, 108, 110, 111, 113, 114, 116, 117, 119, 120, 122, 123, 125, 126, 128, 129, 131], "color": "rgba(229, 117, 117, 0.8)"}, {"id": "HX3", "name": "HX Matrix Row 138", "redundant_row": 138, "dependencies": [2, 3, 6, 11, 12, 13, 14, 20, 21, 22, 24, 27, 29, 30, 31, 32, 33, 34, 36, 38, 39, 40, 46, 47, 49, 50, 51, 52, 53, 54, 56, 59, 62, 63, 65, 67, 69, 70, 73, 75, 76, 77, 78, 79, 80, 82, 85, 87, 89, 90, 94, 95, 97, 100, 101, 104, 108, 109, 111, 113, 115, 116, 120, 121, 124, 129, 132, 133, 134, 136, 137], "redundancy_set": [2, 3, 6, 11, 12, 13, 14, 20, 21, 22, 24, 27, 29, 30, 31, 32, 33, 34, 36, 38, 39, 40, 46, 47, 49, 50, 51, 52, 53, 54, 56, 59, 62, 63, 65, 67, 69, 70, 73, 75, 76, 77, 78, 79, 80, 82, 85, 87, 89, 90, 94, 95, 97, 100, 101, 104, 108, 109, 111, 113, 115, 116, 120, 121, 124, 129, 132, 133, 134, 136, 137, 138], "color": "rgba(229, 117, 117, 0.8)"}, {"id": "HX4", "name": "HX Matrix Row 139", "redundant_row": 139, "dependencies": [0, 2, 4, 6, 7, 11, 12, 15, 20, 23, 24, 25, 27, 28, 29, 35, 37, 38, 41, 46, 48, 49, 55, 56, 57, 59, 62, 64, 65, 66, 67, 68, 69, 71, 73, 74, 75, 81, 82, 83, 84, 85, 86, 87, 88, 89, 91, 94, 97, 98, 100, 102, 104, 105, 108, 110, 111, 112, 113, 114, 115, 117, 120, 122, 124, 125, 129, 130, 132, 135, 136], "redundancy_set": [0, 2, 4, 6, 7, 11, 12, 15, 20, 23, 24, 25, 27, 28, 29, 35, 37, 38, 41, 46, 48, 49, 55, 56, 57, 59, 62, 64, 65, 66, 67, 68, 69, 71, 73, 74, 75, 81, 82, 83, 84, 85, 86, 87, 88, 89, 91, 94, 97, 98, 100, 102, 104, 105, 108, 110, 111, 112, 113, 114, 115, 117, 120, 122, 124, 125, 129, 130, 132, 135, 136, 139], "color": "rgba(229, 117, 117, 0.8)"}, {"id": "HX5", "name": "HX Matrix Row 140", "redundant_row": 140, "dependencies": [4, 5, 6, 8, 9, 10, 15, 18, 19, 22, 24, 25, 26, 28, 29, 30, 36, 37, 38, 40, 43, 45, 46, 47, 50, 51, 52, 54, 55, 56, 60, 63, 65, 66, 67, 68, 69, 70, 73, 74, 78, 79, 81, 83, 84, 86, 89, 91, 92, 93, 94, 95, 98, 99, 101, 103, 105, 106, 108, 113, 116, 117, 120, 124, 125, 127, 129, 131, 133, 136, 137], "redundancy_set": [4, 5, 6, 8, 9, 10, 15, 18, 19, 22, 24, 25, 26, 28, 29, 30, 36, 37, 38, 40, 43, 45, 46, 47, 50, 51, 52, 54, 55, 56, 60, 63, 65, 66, 67, 68, 69, 70, 73, 74, 78, 79, 81, 83, 84, 86, 89, 91, 92, 93, 94, 95, 98, 99, 101, 103, 105, 106, 108, 113, 116, 117, 120, 124, 125, 127, 129, 131, 133, 136, 137, 140], "color": "rgba(229, 117, 117, 0.8)"}, {"id": "HX6", "name": "HX Matrix Row 141", "redundant_row": 141, "dependencies": [0, 1, 2, 4, 5, 6, 14, 15, 18, 23, 24, 25, 26, 32, 33, 34, 36, 39, 41, 42, 43, 44, 45, 46, 48, 50, 51, 52, 58, 59, 61, 62, 63, 64, 65, 66, 68, 71, 74, 75, 77, 79, 81, 82, 85, 87, 88, 89, 90, 91, 92, 94, 97, 99, 101, 102, 106, 107, 109, 112, 113, 116, 120, 121, 123, 125, 127, 128, 132, 133, 136], "redundancy_set": [0, 1, 2, 4, 5, 6, 14, 15, 18, 23, 24, 25, 26, 32, 33, 34, 36, 39, 41, 42, 43, 44, 45, 46, 48, 50, 51, 52, 58, 59, 61, 62, 63, 64, 65, 66, 68, 71, 74, 75, 77, 79, 81, 82, 85, 87, 88, 89, 90, 91, 92, 94, 97, 99, 101, 102, 106, 107, 109, 112, 113, 116, 120, 121, 123, 125, 127, 128, 132, 133, 136, 141], "color": "rgba(229, 117, 117, 0.8)"}, {"id": "HX7", "name": "HX Matrix Row 142", "redundant_row": 142, "dependencies": [1, 2, 3, 5, 6, 7, 12, 15, 16, 19, 25, 26, 27, 33, 34, 35, 37, 40, 42, 43, 44, 45, 46, 47, 48, 49, 51, 52, 53, 59, 60, 62, 63, 64, 65, 66, 67, 69, 75, 76, 78, 80, 82, 83, 86, 88, 89, 90, 91, 92, 93, 95, 96, 98, 100, 102, 103, 107, 110, 113, 114, 117, 121, 122, 124, 126, 128, 129, 133, 134, 137], "redundancy_set": [1, 2, 3, 5, 6, 7, 12, 15, 16, 19, 25, 26, 27, 33, 34, 35, 37, 40, 42, 43, 44, 45, 46, 47, 48, 49, 51, 52, 53, 59, 60, 62, 63, 64, 65, 66, 67, 69, 75, 76, 78, 80, 82, 83, 86, 88, 89, 90, 91, 92, 93, 95, 96, 98, 100, 102, 103, 107, 110, 113, 114, 117, 121, 122, 124, 126, 128, 129, 133, 134, 137, 142], "color": "rgba(229, 117, 117, 0.8)"}, {"id": "HX8", "name": "HX Matrix Row 143", "redundant_row": 143, "dependencies": [0, 1, 3, 6, 8, 9, 10, 11, 13, 14, 15, 17, 18, 19, 26, 28, 29, 30, 31, 32, 33, 35, 36, 37, 41, 42, 44, 46, 49, 52, 54, 55, 56, 57, 58, 59, 61, 62, 64, 66, 68, 69, 76, 79, 80, 83, 87, 88, 90, 92, 94, 95, 96, 99, 100, 103, 111, 112, 113, 115, 116, 117, 122, 125, 126, 129, 132, 133, 135, 136, 137], "redundancy_set": [0, 1, 3, 6, 8, 9, 10, 11, 13, 14, 15, 17, 18, 19, 26, 28, 29, 30, 31, 32, 33, 35, 36, 37, 41, 42, 44, 46, 49, 52, 54, 55, 56, 57, 58, 59, 61, 62, 64, 66, 68, 69, 76, 79, 80, 83, 87, 88, 90, 92, 94, 95, 96, 99, 100, 103, 111, 112, 113, 115, 116, 117, 122, 125, 126, 129, 132, 133, 135, 136, 137, 143], "color": "rgba(229, 117, 117, 0.8)"}, {"id": "HZ1", "name": "HZ Matrix Row 130", "redundant_row": 130, "dependencies": [0, 1, 3, 4, 6, 7, 9, 10, 12, 13, 15, 16, 18, 19, 21, 22, 36, 37, 39, 40, 42, 43, 45, 46, 48, 49, 51, 52, 54, 55, 57, 58, 72, 73, 75, 76, 78, 79, 81, 82, 84, 85, 87, 88, 90, 91, 93, 94, 108, 109, 111, 112, 114, 115, 117, 118, 120, 121, 123, 124, 126, 127, 129], "redundancy_set": [0, 1, 3, 4, 6, 7, 9, 10, 12, 13, 15, 16, 18, 19, 21, 22, 36, 37, 39, 40, 42, 43, 45, 46, 48, 49, 51, 52, 54, 55, 57, 58, 72, 73, 75, 76, 78, 79, 81, 82, 84, 85, 87, 88, 90, 91, 93, 94, 108, 109, 111, 112, 114, 115, 117, 118, 120, 121, 123, 124, 126, 127, 129, 130], "color": "rgba(0, 160, 135, 0.8)"}, {"id": "HZ2", "name": "HZ Matrix Row 131", "redundant_row": 131, "dependencies": [0, 2, 3, 5, 6, 8, 9, 11, 12, 14, 15, 17, 18, 20, 21, 23, 36, 38, 39, 41, 42, 44, 45, 47, 48, 50, 51, 53, 54, 56, 57, 59, 72, 74, 75, 77, 78, 80, 81, 83, 84, 86, 87, 89, 90, 92, 93, 95, 108, 110, 111, 113, 114, 116, 117, 119, 120, 122, 123, 125, 126, 128, 129], "redundancy_set": [0, 2, 3, 5, 6, 8, 9, 11, 12, 14, 15, 17, 18, 20, 21, 23, 36, 38, 39, 41, 42, 44, 45, 47, 48, 50, 51, 53, 54, 56, 57, 59, 72, 74, 75, 77, 78, 80, 81, 83, 84, 86, 87, 89, 90, 92, 93, 95, 108, 110, 111, 113, 114, 116, 117, 119, 120, 122, 123, 125, 126, 128, 129, 131], "color": "rgba(0, 160, 135, 0.8)"}, {"id": "HZ3", "name": "HZ Matrix Row 138", "redundant_row": 138, "dependencies": [2, 5, 6, 9, 13, 15, 17, 18, 22, 23, 25, 26, 29, 34, 36, 37, 39, 41, 43, 44, 48, 49, 50, 51, 53, 56, 58, 59, 61, 63, 64, 68, 69, 71, 72, 73, 74, 75, 76, 77, 79, 82, 86, 87, 88, 90, 91, 92, 96, 97, 99, 102, 104, 105, 106, 107, 112, 113, 114, 116, 117, 118, 120, 123, 124, 127, 132, 133, 134, 136, 137], "redundancy_set": [2, 5, 6, 9, 13, 15, 17, 18, 22, 23, 25, 26, 29, 34, 36, 37, 39, 41, 43, 44, 48, 49, 50, 51, 53, 56, 58, 59, 61, 63, 64, 68, 69, 71, 72, 73, 74, 75, 76, 77, 79, 82, 86, 87, 88, 90, 91, 92, 96, 97, 99, 102, 104, 105, 106, 107, 112, 113, 114, 116, 117, 118, 120, 123, 124, 127, 132, 133, 134, 136, 137, 138], "color": "rgba(0, 160, 135, 0.8)"}, {"id": "HZ4", "name": "HZ Matrix Row 139", "redundant_row": 139, "dependencies": [2, 3, 5, 7, 9, 10, 12, 13, 14, 15, 16, 17, 19, 22, 25, 27, 29, 30, 34, 35, 36, 38, 39, 40, 41, 42, 43, 45, 52, 53, 54, 56, 57, 58, 60, 61, 62, 63, 65, 68, 70, 71, 72, 78, 79, 80, 82, 83, 86, 89, 90, 93, 98, 99, 100, 102, 103, 104, 112, 115, 116, 119, 120, 121, 123, 125, 127, 128, 132, 135, 136], "redundancy_set": [2, 3, 5, 7, 9, 10, 12, 13, 14, 15, 16, 17, 19, 22, 25, 27, 29, 30, 34, 35, 36, 38, 39, 40, 41, 42, 43, 45, 52, 53, 54, 56, 57, 58, 60, 61, 62, 63, 65, 68, 70, 71, 72, 78, 79, 80, 82, 83, 86, 89, 90, 93, 98, 99, 100, 102, 103, 104, 112, 115, 116, 119, 120, 121, 123, 125, 127, 128, 132, 135, 136, 139], "color": "rgba(0, 160, 135, 0.8)"}, {"id": "HZ5", "name": "HZ Matrix Row 140", "redundant_row": 140, "dependencies": [3, 4, 6, 8, 10, 11, 13, 14, 15, 16, 17, 18, 20, 23, 24, 26, 28, 30, 31, 35, 37, 39, 40, 41, 42, 43, 44, 46, 53, 54, 55, 57, 58, 59, 60, 61, 62, 63, 64, 66, 69, 71, 72, 73, 79, 80, 81, 83, 87, 90, 91, 94, 99, 100, 101, 103, 104, 105, 108, 113, 116, 117, 121, 122, 124, 126, 128, 129, 133, 136, 137], "redundancy_set": [3, 4, 6, 8, 10, 11, 13, 14, 15, 16, 17, 18, 20, 23, 24, 26, 28, 30, 31, 35, 37, 39, 40, 41, 42, 43, 44, 46, 53, 54, 55, 57, 58, 59, 60, 61, 62, 63, 64, 66, 69, 71, 72, 73, 79, 80, 81, 83, 87, 90, 91, 94, 99, 100, 101, 103, 104, 105, 108, 113, 116, 117, 121, 122, 124, 126, 128, 129, 133, 136, 137, 140], "color": "rgba(0, 160, 135, 0.8)"}, {"id": "HZ6", "name": "HZ Matrix Row 141", "redundant_row": 141, "dependencies": [1, 2, 3, 9, 10, 11, 14, 15, 18, 23, 24, 26, 27, 31, 32, 34, 38, 43, 46, 47, 48, 50, 52, 53, 57, 58, 60, 62, 65, 67, 68, 69, 70, 71, 72, 73, 77, 78, 80, 82, 84, 85, 86, 88, 91, 93, 94, 95, 96, 97, 99, 100, 101, 107, 108, 111, 113, 114, 115, 116, 117, 118, 121, 122, 123, 125, 126, 127, 132, 133, 136], "redundancy_set": [1, 2, 3, 9, 10, 11, 14, 15, 18, 23, 24, 26, 27, 31, 32, 34, 38, 43, 46, 47, 48, 50, 52, 53, 57, 58, 60, 62, 65, 67, 68, 69, 70, 71, 72, 73, 77, 78, 80, 82, 84, 85, 86, 88, 91, 93, 94, 95, 96, 97, 99, 100, 101, 107, 108, 111, 113, 114, 115, 116, 117, 118, 121, 122, 123, 125, 126, 127, 132, 133, 136, 141], "color": "rgba(0, 160, 135, 0.8)"}, {"id": "HZ7", "name": "HZ Matrix Row 142", "redundant_row": 142, "dependencies": [0, 2, 3, 4, 10, 11, 12, 15, 16, 19, 25, 27, 28, 32, 33, 35, 36, 39, 44, 47, 49, 51, 53, 54, 58, 59, 60, 61, 63, 66, 68, 69, 70, 71, 73, 74, 78, 79, 81, 83, 84, 85, 86, 87, 89, 92, 94, 95, 96, 97, 98, 100, 101, 102, 109, 112, 114, 115, 116, 117, 118, 119, 122, 123, 124, 126, 127, 128, 133, 134, 137], "redundancy_set": [0, 2, 3, 4, 10, 11, 12, 15, 16, 19, 25, 27, 28, 32, 33, 35, 36, 39, 44, 47, 49, 51, 53, 54, 58, 59, 60, 61, 63, 66, 68, 69, 70, 71, 73, 74, 78, 79, 81, 83, 84, 85, 86, 87, 89, 92, 94, 95, 96, 97, 98, 100, 101, 102, 109, 112, 114, 115, 116, 117, 118, 119, 122, 123, 124, 126, 127, 128, 133, 134, 137, 142], "color": "rgba(0, 160, 135, 0.8)"}, {"id": "HZ8", "name": "HZ Matrix Row 143", "redundant_row": 143, "dependencies": [0, 1, 2, 3, 4, 6, 9, 11, 15, 16, 18, 20, 22, 23, 24, 25, 28, 33, 39, 40, 41, 43, 44, 45, 49, 51, 52, 53, 54, 55, 56, 58, 60, 62, 63, 67, 68, 70, 73, 76, 77, 80, 84, 85, 91, 92, 93, 95, 96, 98, 101, 103, 104, 105, 106, 107, 108, 110, 112, 114, 115, 119, 120, 125, 128, 129, 132, 133, 135, 136, 137], "redundancy_set": [0, 1, 2, 3, 4, 6, 9, 11, 15, 16, 18, 20, 22, 23, 24, 25, 28, 33, 39, 40, 41, 43, 44, 45, 49, 51, 52, 53, 54, 55, 56, 58, 60, 62, 63, 67, 68, 70, 73, 76, 77, 80, 84, 85, 91, 92, 93, 95, 96, 98, 101, 103, 104, 105, 106, 107, 108, 110, 112, 114, 115, 119, 120, 125, 128, 129, 132, 133, 135, 136, 137, 143], "color": "rgba(0, 160, 135, 0.8)"}];
        
        // Selected redundancy patterns
        let selectedPatterns = new Set();
        
        // Grid state: stores color information for each cell
        let gridState = {};
        
        // Initialize grid
        function initializeGrid() {
            const grid = document.getElementById('grid');
            for (let row = 0; row < m; row++) {
                for (let col = 0; col < ell; col++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    cell.id = `cell-${row}-${col}`;
                    cell.addEventListener('click', () => cellClicked(row, col));
                    grid.appendChild(cell);
                }
            }
        }
        
        // Initialize redundancy list
        function initializeRedundancyList() {
            const list = document.getElementById('redundancy-list');
            redundancies.forEach(redundancy => {
                const item = document.createElement('div');
                item.className = 'redundancy-item';
                item.id = `item-${redundancy.id}`;
                item.innerHTML = `
                    <strong>${redundancy.name}</strong><br>
                    <small>Dependencies: ${redundancy.dependencies.length} rows</small><br>
                    <small>Total elements: ${redundancy.redundancy_set.length}</small>
                `;
                item.addEventListener('click', () => toggleRedundancy(redundancy.id));
                list.appendChild(item);
            });
        }
        
        // Toggle redundancy pattern selection
        function toggleRedundancy(id) {
            const item = document.getElementById(`item-${id}`);
            
            if (selectedPatterns.has(id)) {
                selectedPatterns.delete(id);
                item.classList.remove('selected');
            } else {
                selectedPatterns.add(id);
                item.classList.add('selected');
            }
            
            updateVisualization();
            updateInfo();
        }
        
        // Mix colors using XOR-like logic
        function mixColors(colorInfo) {
            // XOR mod 2 logic: 
            // - Odd number of patterns: show color
            // - Even number of patterns: show no color (background)
            
            if (colorInfo.length % 2 === 1) {
                // Odd number of patterns - show a representative color
                // For simplicity, show the first pattern's color
                // Or mix all colors if you want a blend
                return colorInfo[0].color;
            } else {
                // Even number of patterns (including 0) - XOR cancellation
                // Return transparent to show background
                return 'transparent';
            }
        }

        // Update grid visualization based on selected patterns
        function updateVisualization() {
            // Reset grid state
            gridState = {};
            
            // Apply each selected pattern
            selectedPatterns.forEach(patternId => {
                const redundancy = redundancies.find(r => r.id === patternId);
                if (redundancy) {
                    redundancy.redundancy_set.forEach(element => {
                        const col = Math.floor(element / m);
                        const row = element % m;
                        const cellKey = `${row}-${col}`;
                        
                        if (!gridState[cellKey]) {
                            gridState[cellKey] = [];
                        }
                        
                        // Add this pattern's color to the cell
                        gridState[cellKey].push({
                            pattern: patternId,
                            color: redundancy.color,
                            isRedundant: element === redundancy.redundant_row
                        });
                    });
                }
            });
            
            // Update visual appearance of cells
            for (let row = 0; row < m; row++) {
                for (let col = 0; col < ell; col++) {
                    const cell = document.getElementById(`cell-${row}-${col}`);
                    const cellKey = `${row}-${col}`;
                    
                    if (gridState[cellKey] && gridState[cellKey].length > 0) {
                        // Perform XOR-like color mixing
                        const finalColor = mixColors(gridState[cellKey]);
                        
                        // Only set background if there's a visible color
                        if (finalColor === 'transparent') {
                            cell.style.backgroundColor = ''; // Show default gray background
                        } else {
                            cell.style.backgroundColor = finalColor;
                        }
                        
                        // Add border for redundant rows
                        const hasRedundant = gridState[cellKey].some(c => c.isRedundant);
                        if (hasRedundant) {
                            cell.style.border = '2px solid #000';
                        } else {
                            cell.style.border = '1px dashed #404040';
                        }
                    } else {
                        // Reset to default
                        cell.style.backgroundColor = '';
                        cell.style.border = '1px dashed #404040';
                    }
                }
            }
        }
        
        // Handle cell clicks
        function cellClicked(row, col) {
            const cellKey = `${row}-${col}`;
            const element = row + col * m;
            
            if (gridState[cellKey]) {
                console.log(`Cell (${row}, ${col}) - Element ${element}:`);
                gridState[cellKey].forEach(info => {
                console.log(`  Pattern: ${info.pattern}, Redundant: ${info.isRedundant}`);
            });
        }
    }
    
    // Update info panel
    function updateInfo() {
        const selectedInfo = document.getElementById('selected-info');
        const xorResult = document.getElementById('xor-result');
        
        if (selectedPatterns.size === 0) {
            selectedInfo.innerHTML = 'None selected';
            xorResult.innerHTML = 'No overlapping cells';
            return;
        }
        
        // Show selected patterns
        const selectedNames = Array.from(selectedPatterns).map(id => {
            const redundancy = redundancies.find(r => r.id === id);
            return redundancy ? redundancy.name : id;
        });
        selectedInfo.innerHTML = selectedNames.join('<br>');
        
        // Calculate XOR overlaps
        const overlaps = {};
        Object.keys(gridState).forEach(cellKey => {
            if (gridState[cellKey].length > 1) {
                const patterns = gridState[cellKey].map(c => c.pattern).sort().join('+');
                if (!overlaps[patterns]) {
                    overlaps[patterns] = 0;
                }
                overlaps[patterns]++;
            }
        });
        
        if (Object.keys(overlaps).length === 0) {
            xorResult.innerHTML = 'No overlapping cells';
        } else {
            const overlapText = Object.entries(overlaps)
                .map(([patterns, count]) => `${patterns}: ${count} cells`)
                .join('<br>');
            xorResult.innerHTML = overlapText;
        }
    }
    
    // Clear all selections
    function clearSelection() {
        selectedPatterns.clear();
        document.querySelectorAll('.redundancy-item').forEach(item => {
            item.classList.remove('selected');
        });
        updateVisualization();
        updateInfo();
    }
    
    // Initialize everything when page loads
    document.addEventListener('DOMContentLoaded', () => {
        initializeGrid();
        initializeRedundancyList();
    });
    </script>
</body>
</html>
